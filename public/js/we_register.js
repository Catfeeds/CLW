webpackJsonp([15],{139:function(e,t,s){e.exports=s(140)},140:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(3),r=(s.n(n),s(4)),o=s.n(r),i=s(5);s.n(i);s(2);var a=$("#tel"),c=$("#sms"),u=$("#password"),m=($("#time"),$("#getSms")),l=!0;$(document).on("click","#submit",function(e){var t=a.val(),s=c.val(),n=u.val();if(!t||""===t.trim())return o()({message:"请输入手机号码",position:"center",duration:2e3}),!1;if(!s||""===s.trim())return o()({message:"请输入短信验证码",position:"center",duration:2e3}),!1;if(!n||""===n.trim())return o()({message:"请输入密码",position:"center",duration:2e3}),!1;if(n.length<6||n.length>18)return o()({message:"密码长度必须在6-18位之间",position:"center",duration:2e3}),!1;var r={tel:t,smsCode:s,password:n};$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/registers",type:"post",data:r,success:function(e){if(e.success){var t=o()({message:r.message,position:"center",duration:2e3});window.location.href="/user",setTimeout(function(){t.close(),window.location.href="/user"},1e3)}else o()({message:e.message,position:"center",duration:2e3})},error:function(e){o()({message:e.responseJSON.message,position:"center",duration:2e3})}})}),$(document).on("click","#getSms",function(e){if(!a.val()||""===a.val().trim())return o()({message:"请输入手机号码",position:"center",duration:2e3}),!1;if(!l)return!1;l=!1;var t=a.val()+"/register";$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/sms/captcha/"+t,type:"get",success:function(e){if(e.success){l=!1,m.html("120s");var t=setInterval(function(){m.html(parseInt(m.html())-1+"s"),parseInt(m.html())||(m.html("获取验证码"),window.clearInterval(t),l=!0)},1e3);o()({message:"短信发送成功",position:"center",duration:2e3})}},error:function(e){l=!0,o()({message:e.responseJSON.message,position:"center",duration:2e3})}})})}},[139]);